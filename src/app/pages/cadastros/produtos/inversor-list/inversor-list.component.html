<div class="full-container" *ngIf="showSpinner">
    <mat-spinner class="load-centered"></mat-spinner>
</div>
<div class="row mt-1 mb-1">
    <div class="d-flex justify-content-between" 
        style="display: flex; align-items: center;">
        <div style="display: flex; align-items: center;">
            <button mat-mini-fab
                color="primary"
                (click)="navegarParaMenuDeProdutos()">
                <mat-icon>menu</mat-icon>
            </button>
            <img class="ms-2" width="30px" src="assets/images/inversor.png" alt="">
            <span class="ms-1" style="font-size: large;">Inversores</span>
        </div>
    </div>
</div>

<div class="card-header barra-de-titulo mb-1" 
    style="background-color: #3f51b5; color: #fff; padding: 5px;">
    <span class="ms-2">Filtros</span>
</div>

<div class="card mb-1">
    <div class="card-body"> 

        <div class="row mt-3">
            <div class="mb-3 col-2">
                <label for="fabricante" class="form-label">Fabricante</label>
                <input class="form-control form-control-sm"
                    [(ngModel)]="filtros.fabricante"
                    (keyup.enter)="onEnter()"
                    id="fabricante">
            </div>

            <div class="mb-3 col-2">
                <label for="potencia" class="form-label">Potência</label>
                <input class="form-control form-control-sm" 
                    [(ngModel)]="filtros.potencia"
                    (keyup.enter)="onEnter()"
                    id="potencia">
            </div>

            <div class="mb-3 col-2">
                <label for="garantia" class="form-label">Garantia</label>
                <input class="form-control form-control-sm"
                    [(ngModel)]="filtros.garantiaDefeito"
                    (keyup.enter)="onEnter()"
                    id="garantia">
            </div>

            <div class="mb-3 col-2">
                <label for="monitoramento" class="form-label">Monitoramento</label>
               
                <select class="form-select form-select-sm" 
                    aria-label="Default select example"
                    [(ngModel)]="filtros.monitoramento">                    
                    <ng-container *ngFor="let monitor of monitoramentos">
                        <option [value]="monitor">{{monitor}}</option>
                    </ng-container>
                </select>    
            </div>

            <div class="mb-3 col-2">
                <label for="modelo" class="form-label">Modelo</label>
                <input class="form-control form-control-sm"
                    [(ngModel)]="filtros.modelo"
                    (keyup.enter)="onEnter()"
                    id="modelo">
            </div>
        </div>
        
        <mat-divider></mat-divider>
        <div class="row mt-2">
            <div class="d-flex justify-content-end">        
                <button mat-raised-button color="primary" 
                    (click)="limpar()"
                    class="ms-5">Limpar</button>
                <button mat-raised-button color="primary" 
                    (click)="pesquisar()"
                    class="ms-1">Pesquisar</button>
            </div>
        </div>
    </div>
</div>

<div class="card-header barra-de-titulo mb-1 mt-3" 
    style="background-color: #3f51b5; color: #fff; padding: 5px;">
    <span class="ms-2">Lista de Inversores</span>
</div>
<div class="card mb-5">
    <div class="card-body"> 

    <div class="d-flex justify-content-between" 
        style="display: flex; align-items: center;">
        <button mat-raised-button 
            color="primary" 
            (click)="navegarParaFormularioDeInversor()">
            Adicionar
        </button>        

        <mat-paginator 
            [length]="totalPages"
            [pageSize]="pageSize"
            [pageSizeOptions]="pageOptions"
            aria-label="Select page">
        </mat-paginator>
    </div>    
    
    <mat-divider class="mt-3"></mat-divider>

    <table mat-table [dataSource]="dataSource">
        <!-- Position Column -->
        <ng-container mat-column-codigo  matColumnDef="codigo" style="width: 20px !important;">
            <th mat-header-cell mat-column-codigo  *matHeaderCellDef> Código </th>
            <td mat-cell mat-column-codigo *matCellDef="let element"
            style="width: 5%;"><span style="text-transform: uppercase;">{{element.id}}</span></td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="fabricante" >
            <th mat-header-cell *matHeaderCellDef> Fabricante </th>
            <td mat-cell mat-column-fabricante *matCellDef="let element"
                style="width: 21%; text-transform: uppercas;"> {{element.fabricante}} </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="modelo" >
            <th mat-header-cell *matHeaderCellDef> Modelo </th>
            <td mat-cell mat-column-modelo *matCellDef="let element"
                style="width: 15%; text-transform: uppercas;"> {{element.modelo}} </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="potencia" >
            <th mat-header-cell *matHeaderCellDef> Petência </th>
            <td mat-cell mat-column-potencia *matCellDef="let element"
                style="width: 15%; text-transform: uppercas;"> {{element.potencia }} </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="garantia" >
            <th mat-header-cell *matHeaderCellDef> Garantia </th>
            <td mat-cell mat-column-garantia *matCellDef="let element"
                style="width: 15%; text-transform: uppercase;"> {{element.garantiaDefeito}} </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container mat-column-monitoramento matColumnDef="monitoramento" >
            <th mat-header-cell *matHeaderCellDef> Monitoramento </th>
            <td mat-cell mat-column-monitoramento *matCellDef="let element"
                style="width: 15%; text-transform: uppercase;"> {{element.monitoramento}} </td>
        </ng-container>

        <!-- Weight Column -->
        <ng-container matColumnDef="acoes">
        <th mat-header-cell *matHeaderCellDef mat-column-acoes > Ações </th>
        <td mat-cell mat-column-acoes *matCellDef="let element"
            style="width: 11%;">
            
            <button mat-mini-fab
                color="primary"
                (click)="editar(element)"
                [routerLink]="['/cadastro/produtos/inversor-form']" >
                <mat-icon>edit</mat-icon>
            </button>

            <button mat-mini-fab
                color="primary"
                class="ms-2"
                (click)="excluir(element.id)">
                <mat-icon>delete</mat-icon>
            </button>
        </td>
        </ng-container>  

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
</div>
