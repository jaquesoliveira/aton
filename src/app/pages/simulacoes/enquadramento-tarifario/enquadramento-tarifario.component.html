<div class="mt-3">
    <h2 class="my-title-1">Enquadramento Tarifário</h2>
</div>
<!-- <mat-divider></mat-divider> -->

<div class="card">
    <div class="card-body">
        <div class="row">
            <mat-form-field class="col-lg-3 col-sm-12 col-12">    
                <mat-label>Concessionária</mat-label>
                <select matNativeControl
                    [(ngModel)]="modalidadeTarifariaSelecionada"
                    name="modalidadeTarifaria" 
                    required>

                    <option label="-- Selecione --"></option>
                    <ng-container 
                        *ngFor="let modalidade of modalidadeTarifariaList;">
                        <option [value]="modalidade">
                            {{modalidade}}
                        </option>
                    </ng-container>
                </select>
            </mat-form-field>
        </div>
    </div>
</div>


  
<mat-expansion-panel class="mt-3" [expanded]="false">
    <mat-expansion-panel-header>
        <mat-panel-title>
            Tarífas
        </mat-panel-title>        
    </mat-expansion-panel-header>

    <mat-card>
        <mat-card-content>

            <div class="row">
                <div class="col-lg-3 col-sm-12 col-12 ">
                    <mat-form-field >    
                        <mat-label>Modalidade Tarifária</mat-label>
                        <input matInput 
                            value="CONVENICIONAL"
                            readonly>
                    </mat-form-field>
                </div>
                

                <div class="col-lg-6 col-sm-12 col-12 ">
                    <mat-card>
                        <mat-card-header class="mb-2">
                            <mat-card-subtitle>
                                Demanda
                            </mat-card-subtitle>
                        </mat-card-header>

                        <mat-card-content>
                            <mat-form-field >    
                                <mat-label>Única</mat-label>
                                <input matInput 
                                    value="15,20"
                                    readonly>
                            </mat-form-field>

                            <mat-form-field class="ms-2">    
                                <mat-label>Ultrapassagem</mat-label>
                                <input matInput 
                                    value="15,20"
                                    readonly>
                            </mat-form-field>
                        </mat-card-content>
                    </mat-card>
                </div>

                <div class="col-lg-3 col-sm-12 col-12 ">
                    <mat-card>
                        <mat-card-header class="mb-2">
                            <mat-card-subtitle>
                                Consumo
                            </mat-card-subtitle>
                        </mat-card-header>

                        <mat-card-content>
                            <mat-form-field >    
                                <mat-label>Única</mat-label>
                                <input matInput 
                                    value="15,20"
                                    readonly>
                            </mat-form-field>
                        </mat-card-content>
                    </mat-card>
                </div>
            </div>
        </mat-card-content>
    </mat-card>

    <!-- azul -->
    <mat-card class="mt-2">
        <mat-card-content>

            <div class="row">
                <div class="col-lg-3 col-sm-12 col-12 ">
                    <mat-form-field >    
                        <mat-label>Modalidade Tarifária</mat-label>
                        <input matInput 
                            value="AZUL"
                            readonly>
                    </mat-form-field>
                </div>
                

                <div class="col-lg-9 col-sm-12 col-12 ">
                    <mat-card>
                        <mat-card-header class="mb-2">
                            <mat-card-subtitle>
                                Demanda
                            </mat-card-subtitle>
                        </mat-card-header>

                        <mat-card-content>
                            <mat-form-field >    
                                <mat-label>Única</mat-label>
                                <input matInput 
                                    value="15,20"
                                    readonly>
                            </mat-form-field>

                            <mat-form-field class="ms-2">    
                                <mat-label>Ultrapassagem</mat-label>
                                <input matInput 
                                    value="15,20"
                                    readonly>
                            </mat-form-field>

                            <mat-form-field class="ms-2">    
                                <mat-label>Única</mat-label>
                                <input matInput 
                                    value="15,20"
                                    readonly>
                            </mat-form-field>

                            <mat-form-field class="ms-2">    
                                <mat-label>Ultrapassagem</mat-label>
                                <input matInput 
                                    value="15,20"
                                    readonly>
                            </mat-form-field>
                        </mat-card-content>
                    </mat-card>
                </div>


                <div class="col-lg-3 col-sm-12 col-12 "></div>
                <div class="col-lg-9 col-sm-12 col-12 mt-2">
                    <mat-card>
                        <mat-card-header class="mb-2">
                            <mat-card-subtitle>
                                Consumo
                            </mat-card-subtitle>
                        </mat-card-header>

                        <mat-card-content>
                            <mat-form-field >    
                                <mat-label>Única</mat-label>
                                <input matInput 
                                    value="15,20"
                                    readonly>
                            </mat-form-field>

                            <mat-form-field class="ms-2">    
                                <mat-label>Única</mat-label>
                                <input matInput 
                                    value="15,20"
                                    readonly>
                            </mat-form-field>

                            <mat-form-field class="ms-2">    
                                <mat-label>Única</mat-label>
                                <input matInput 
                                    value="15,20"
                                    readonly>
                            </mat-form-field>

                            <mat-form-field class="ms-2">    
                                <mat-label>Única</mat-label>
                                <input matInput 
                                    value="15,20"
                                    readonly>
                            </mat-form-field>
                        </mat-card-content>
                    </mat-card>
                </div>
            </div>
        </mat-card-content>
    </mat-card>


    <!-- verde -->
    <mat-card class="mt-2">
        <mat-card-content>

            <div class="row">
                <div class="col-lg-3 col-sm-12 col-12 ">
                    <mat-form-field >    
                        <mat-label>Modalidade Tarifária</mat-label>
                        <input matInput 
                            value="VERDE"
                            readonly>
                    </mat-form-field>
                </div>
                

                <div class="col-lg-9 col-sm-12 col-12 ">
                    <mat-card>
                        <mat-card-header class="mb-2">
                            <mat-card-subtitle>
                                Demanda
                            </mat-card-subtitle>
                        </mat-card-header>

                        <mat-card-content>
                            <mat-form-field >    
                                <mat-label>Única</mat-label>
                                <input matInput 
                                    value="15,20"
                                    readonly>
                            </mat-form-field>

                            <mat-form-field class="ms-2">    
                                <mat-label>Ultrapassagem</mat-label>
                                <input matInput 
                                    value="15,20"
                                    readonly>
                            </mat-form-field>

                            <mat-form-field class="ms-2">    
                                <mat-label>Única</mat-label>
                                <input matInput 
                                    value="15,20"
                                    readonly>
                            </mat-form-field>

                            <mat-form-field class="ms-2">    
                                <mat-label>Ultrapassagem</mat-label>
                                <input matInput 
                                    value="15,20"
                                    readonly>
                            </mat-form-field>
                        </mat-card-content>
                    </mat-card>
                </div>


                <div class="col-lg-3 col-sm-12 col-12 "></div>
                <div class="col-lg-9 col-sm-12 col-12 mt-2">
                    <mat-card>
                        <mat-card-header class="mb-2">
                            <mat-card-subtitle>
                                Consumo
                            </mat-card-subtitle>
                        </mat-card-header>

                        <mat-card-content>
                            <mat-form-field >    
                                <mat-label>Única</mat-label>
                                <input matInput 
                                    value="15,20"
                                    readonly>
                            </mat-form-field>

                            <mat-form-field class="ms-2">    
                                <mat-label>Única</mat-label>
                                <input matInput 
                                    value="15,20"
                                    readonly>
                            </mat-form-field>

                            <mat-form-field class="ms-2">    
                                <mat-label>Única</mat-label>
                                <input matInput 
                                    value="15,20"
                                    readonly>
                            </mat-form-field>

                            <mat-form-field class="ms-2">    
                                <mat-label>Única</mat-label>
                                <input matInput 
                                    value="15,20"
                                    readonly>
                            </mat-form-field>
                        </mat-card-content>
                    </mat-card>
                </div>
            </div>
        </mat-card-content>
    </mat-card>


    <mat-card class="mt-2">
        <mat-card-content>

            <div class="row">
                <div class="col-lg-3 col-sm-12 col-12 ">
                    <mat-form-field >    
                        <mat-label>Modalidade Tarifária</mat-label>
                        <input matInput 
                            value="BAIXA TENSÃO"
                            readonly>
                    </mat-form-field>
                </div>
                

                

                <div class="col-lg-3 col-sm-12 col-12 ">
                    <mat-card>
                        <mat-card-header class="mb-2">
                            <mat-card-subtitle>
                                Consumo
                            </mat-card-subtitle>
                        </mat-card-header>

                        <mat-card-content>
                            <mat-form-field >    
                                <mat-label>Único</mat-label>
                                <input matInput 
                                    value="15,20"
                                    readonly>
                            </mat-form-field>
                        </mat-card-content>
                    </mat-card>
                </div>
            </div>
        </mat-card-content>
    </mat-card>


</mat-expansion-panel>

      
 

<div class="card mt-5">
    <div class="card-body">
        <div class="row">
            <mat-form-field class="col-lg-3 col-sm-12 col-12">    
                <mat-label>Modalidade Tarifária</mat-label>
                <select matNativeControl
                    [(ngModel)]="modalidadeTarifariaSelecionada"
                    name="modalidadeTarifaria" 
                    required>

                    <option label="-- Selecione --"></option>
                    <ng-container 
                        *ngFor="let modalidade of modalidadeTarifariaList;">
                        <option [value]="modalidade">
                            {{modalidade}}
                        </option>
                    </ng-container>
                </select>
            </mat-form-field>

            <mat-form-field class="col-lg-3 col-sm-12 col-12">
                <mat-label>Tipo</mat-label>
                <select matNativeControl
                    [(ngModel)]="tipo"
                    (change)="preencherDescricao()"
                    name="modalidadeTarifaria" 
                    [disabled]="modalidadeTarifariaSelecionada==='Baixa Tensão'? true : false"
                    required>

                    <option label="-- Selecione --"></option>
                    <option value="demanda">Demanda</option>
                    <option value="consumo">Consumo</option>                    
                </select>
            </mat-form-field>
            
            <mat-form-field class="col-lg-3 col-sm-12 col-12">
                <mat-label>Descrição</mat-label>
                <select matNativeControl
                    [(ngModel)]="descricaoSelecionada"
                    name="modalidadeTarifaria" 
                    [disabled]="modalidadeTarifariaSelecionada==='Baixa Tensão'? true : false"
                    required>
                    <option label="-- Selecione --"></option>
                    <ng-container 
                        *ngFor="let descricao of descricaoList;">
                        <option [value]="descricao">{{descricao}}</option>
                    </ng-container>
                </select>
            </mat-form-field>
        
            <!-- <mat-form-field class="col-lg-3 col-sm-12 col-12 ">    
                <mat-label>Consumo</mat-label>
                <select matNativeControl required>
                    <option label="-- Selecione --"></option>
                    <ng-container 
                        *ngFor="let consumo of consumoList;">
                        <option [value]="consumo">{{consumo}}</option>
                    </ng-container>                    
                </select>
            </mat-form-field> -->

            <mat-form-field class="col-lg-3 col-sm-12 col-12 ">    
                <mat-label>Tarífa</mat-label>
                <input matInput 
                    [(ngModel)]="tarifa">
            </mat-form-field>

            
            
        </div>

        <p class="mt-4">
            Quantidade Consumida
        </p>        
        
        <div class="row mb-3" *ngIf="!consumoMedioMensalChecked">
            <mat-form-field class="col-lg-3 col-sm-12 col-12">    
                <mat-label>Janeiro</mat-label>
                <input matInput 
                    [(ngModel)]="janeiro"
                    maxlength="9">
                <mat-hint>(KWh/mês)</mat-hint>
            </mat-form-field>

            <mat-form-field class="col-lg-3 col-sm-12 col-12">    
                <mat-label>Fevereiro</mat-label>
                <input matInput 
                    [(ngModel)]="fevereiro"
                    maxlength="9">
                <mat-hint>(KWh/mês)</mat-hint>
            </mat-form-field>

            <mat-form-field class="col-lg-3 col-sm-12 col-12">    
                <mat-label>Março</mat-label>
                <input matInput 
                    [(ngModel)]="marco"
                    maxlength="9">
                <mat-hint>(KWh/mês)</mat-hint>
            </mat-form-field>

            <mat-form-field class="col-lg-3 col-sm-12 col-12">    
                <mat-label>Abril</mat-label>
                <input matInput 
                    [(ngModel)]="abril"
                    maxlength="9">
                <mat-hint>(KWh/mês)</mat-hint>
            </mat-form-field>

            <mat-form-field class="col-lg-3 col-sm-12 col-12 mt-3">    
                <mat-label>Maio</mat-label>
                <input matInput 
                    [(ngModel)]="maio"
                    maxlength="9">
                <mat-hint>(KWh/mês)</mat-hint>
            </mat-form-field>

            <mat-form-field class="col-lg-3 col-sm-12 col-12 mt-3">    
                <mat-label>Junho</mat-label>
                <input matInput 
                    [(ngModel)]="junho"
                    maxlength="9">
                <mat-hint>(KWh/mês)</mat-hint>
            </mat-form-field>

            <mat-form-field class="col-lg-3 col-sm-12 col-12 mt-3">    
                <mat-label>Julho</mat-label>
                <input matInput 
                    [(ngModel)]="julho"
                    maxlength="9">
                <mat-hint>(KWh/mês)</mat-hint>
            </mat-form-field>

            <mat-form-field class="col-lg-3 col-sm-12 col-12 mt-3">    
                <mat-label>Agosto</mat-label>
                <input matInput 
                    [(ngModel)]="agosto"
                    maxlength="9">
                <mat-hint>(KWh/mês)</mat-hint>
            </mat-form-field>

            <mat-form-field class="col-lg-3 col-sm-12 col-12 mt-3">    
                <mat-label>Setembro</mat-label>
                <input matInput 
                    [(ngModel)]="setembro"
                    maxlength="9">
                <mat-hint>(KWh/mês)</mat-hint>
            </mat-form-field>

            <mat-form-field class="col-lg-3 col-sm-12 col-12 mt-3">    
                <mat-label>Outubro</mat-label>
                <input matInput 
                    [(ngModel)]="outubro"
                    maxlength="9">
                <mat-hint>(KWh/mês)</mat-hint>
            </mat-form-field>

            <mat-form-field class="col-lg-3 col-sm-12 col-12 mt-3">    
                <mat-label>Novembro</mat-label>
                <input matInput 
                    [(ngModel)]="novembro"
                    maxlength="9">
                <mat-hint>(KWh/mês)</mat-hint>
            </mat-form-field>

            <mat-form-field class="col-lg-3 col-sm-12 col-12 mt-3">    
                <mat-label>Dezembro</mat-label>
                <input matInput 
                    [(ngModel)]="dezembro"
                    maxlength="9">
                <mat-hint>(KWh/mês)</mat-hint>
            </mat-form-field>

        </div>
    
        <mat-divider></mat-divider>
        
        <div class="d-flex justify-content-end">
            <button mat-raised-button
                (click)="calcular()" 
                class="mt-3"
                color="primary">
                Calcular
            </button>    
        </div>
    </div>
</div>

<div class="card mt-3">
    <div class="card-body">
        <div class="row">

            <div class="col-lg-4 col-md-6 col-sm-12 mt-1">
                <app-detalhes-mes 
                    mes="Janeiro" 
                    [valor]="consumoMensal[0]">
                </app-detalhes-mes>
            </div>

            <div class="col-lg-4 col-md-6 col-sm-12 mt-1">
                <app-detalhes-mes 
                    mes="Fevereiro" 
                    [valor]="consumoMensal[1]">
                </app-detalhes-mes>
            </div>

            <div class="col-lg-4 col-md-6 col-sm-12 mt-1">
                <app-detalhes-mes 
                    mes="Março" 
                    [valor]="consumoMensal[2]">
                </app-detalhes-mes>
            </div>

            <div class="col-lg-4 col-md-6 col-sm-12 mt-1">
                <app-detalhes-mes 
                    mes="Abril" 
                    [valor]="consumoMensal[3]">
                </app-detalhes-mes>
            </div>

            <div class="col-lg-4 col-md-6 col-sm-12 mt-1">
                <app-detalhes-mes 
                    mes="Maio" 
                    [valor]="consumoMensal[4]">
                </app-detalhes-mes>
            </div>

            <div class="col-lg-4 col-md-6 col-sm-12 mt-1">
                <app-detalhes-mes 
                    mes="Junho" 
                    [valor]="consumoMensal[5]">
                </app-detalhes-mes>
            </div>

            <div class="col-lg-4 col-md-6 col-sm-12 mt-1">
                <app-detalhes-mes 
                    mes="Julho" 
                    [valor]="consumoMensal[6]">
                </app-detalhes-mes>
            </div>

            <div class="col-lg-4 col-md-6 col-sm-12 mt-1">
                <app-detalhes-mes 
                    mes="Agosto" 
                    [valor]="consumoMensal[7]">
                </app-detalhes-mes>
            </div>

            <div class="col-lg-4 col-md-6 col-sm-12 mt-1">
                <app-detalhes-mes 
                    mes="Setembro" 
                    [valor]="consumoMensal[8]">
                </app-detalhes-mes>
            </div>

            <div class="col-lg-4 col-md-6 col-sm-12 mt-1">
                <app-detalhes-mes 
                    mes="Outubro" 
                    [valor]="consumoMensal[9]">
                </app-detalhes-mes>
            </div>

            <div class="col-lg-4 col-md-6 col-sm-12 mt-1">
                <app-detalhes-mes 
                    mes="Novembro" 
                    [valor]="consumoMensal[10]">
                </app-detalhes-mes>
            </div>

            <div class="col-lg-4 col-md-6 col-sm-12 mt-1">
                <app-detalhes-mes 
                    mes="Dezembro" 
                    [valor]="consumoMensal[11]">
                </app-detalhes-mes>
            </div>
        </div>
    </div>
</div>

<div class="card mt-3 mb-5">
    <div class="card-body">
        <div class="row">
            <div class="col-lg-4 col-md-6 col-sm-12 mt-1">
                <div class="card">         
                    <div class="card-body">
                        <div style="display: flex; align-items: center;">
                            <div>
                                <img width="40px" 
                                    src="assets/images/total.png" 
                                    alt="">
                            </div>
                
                            <div>
                                <div>
                                    <span class="ms-2" 
                                        style="font-weight: 500; color: #3f51b5;">
                                        Total
                                    </span>
                                </div>
                                
                                <span class="ms-2" style="color: #777; font-weight: 500;">
                                    {{total | currency}}
                                </span>
                            </div>
                        </div>
                    </div>        
                </div>
            </div>
        </div>
    </div>
</div>